<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Scope and Context</title>
    <style>
    * {
        font-size: 14px;
    }
    body {
        margin: 0 auto;
        width: 75%;    
    }

    img {
        width: 100%;
    }
    </style>
</head>
<body>

    <h2>
        Tại sao chúng ta nên quan tâm về Scope và Context ?
    </h2>
    <p>
        Trong JavaScript, Scope và Context không giống nhau, và nó rất quan trọng để hiểu về sự khác biệt giữa chúng. May mắn thay, câu trả lời ngắn và đơn giản :D 
    </p>

    <p> <b>Câu trả lời ngắn và đơn giản: </b> Scope thì liên quan khả năng hiển thị các biến, còn Context đề cập đến đối tượng mà một chức năng thuộc về. </p>

    <b>Scope</b>
    <p>
        Scope phải làm với khả năng hiển thị của các biến. Trong JavaScript, scope đạt được thông qua việc sử dụng functions . Khi bạn sử dụng từ khóa "var" bên trong một function, bạn đang khởi tạo biến đó private trong function đó và không có thể nhìn thấy bên ngoài function đó. 
    </p> 
    <pre>
        function test1() {
            var color = 'red';
        }

        test();
        console.log( test() );
    </pre>   
    <script>
        function test1() {
            var color = 'red';
        }

        test();
        console.log( test() );
    </script>
    <p>    
        Nhưng nếu có những functions bên trong function đó, Thì những functions `bên trong` có thể nhìn thấy biến đó :D. và biến đó có thể được hiểu trở thành `in-scope`. Những functions có thể thấy biến đó được định nghĩa bên trong chúng. Chúng cũng có thể nhìn thấy bất cứ thứ gì được khai báo bên ngoài chúng, nhưng không bao giờ được khai báo bên trong các functions được lồng trong function đó. Đây là phạm vi trong JavaScript.
    </p>
    <pre>
        // global scope
        var color = 'red';
        function test() {
            return color;
        }
        console.log( test() ); // red ?
    </pre>
    <script>
        // global scope
        var color = 'red';

        function test() {
            return color;
        }

        console.log( test() ); // red ?
    </script>

    <h2> Context </h2>
    <p> Context liên quan đến đối tượng. Nó đề cập đến đối tượng mà function thuộc về.  Khi sử dụng JavaScript từ khóa này đề cập đến đối tượng thuộc thuộc về chức năng nào. </p>
    <p> Ví dụ, bên trong một function, bạn có thể nói `this.accountNumber`, bạn đang đề cập đến tính chất `accountNumber`, nó thuộc về object mà chức năng đó thuộc về. Nếu Object `foo` có một phương thức gọi là `bar`. Khi từ khóa `this` được sử dụng trong phương thức `bar`, nó đề cập đến `foo`. Nếu chức năng `bar` được thực thi trong global scope, thì `this` đề cập đến đối tượng window object ( ngoại trừ trong strict mode ). Nó rất quan trọng để lưu ý sử dụng call() or apply() method. bạn có thể thay đổi context trong đó có một số hàm thực thi. Điều này, lần lượt, thay đổi ý nghĩa của `this` bên trong function khi nó được thực thi.</p>
    <script>
        
        var objA = {
            name: 'objA',
            sayName: function() {
                alert(this.name);
            }
        }

        var objB = {
            name: 'objB',
            sayName: function() {
                alert(this.name);
            }
        }

        // objA.sayName(); // objA
        objA.sayName.apply(objB); // objB

    </script>
</body>
</html>